---
/**
 * Base Layout - Main layout wrapper for all pages
 * Includes SEO, Analytics, and global styles
 */
import SEO from '@/components/SEO.astro';
import Analytics from '@/components/Analytics.astro';

export interface Props {
  title: string;
  description: string;
  image?: string;
  type?: 'website' | 'article' | 'game' | 'product';
  noindex?: boolean;
}

const { title, description, image, type = 'website', noindex = false } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- SEO Component -->
    <SEO
      title={title}
      description={description}
      image={image}
      type={type}
      noindex={noindex}
    />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />

    <!-- Fonts - Preload critical fonts -->
    <link
      rel="preload"
      href="/fonts/orbitron-v29-latin-regular.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="/fonts/inter-v13-latin-regular.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />

    <!-- Analytics Component -->
    <Analytics />

    <!-- Critical CSS inlined by Astro -->
    <style is:global>
      /* CSS Reset */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      /* Root Variables */
      :root {
        --font-heading: 'Orbitron', sans-serif;
        --font-body: 'Inter', sans-serif;
        --color-primary: #00ff88;
        --color-secondary: #ff0055;
        --color-bg: #000000;
        --color-text: #ffffff;
        --color-gray: #808080;
      }

      /* Base Styles */
      html {
        font-family: var(--font-body);
        background-color: var(--color-bg);
        color: var(--color-text);
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      body {
        min-height: 100vh;
        overflow-x: hidden;
      }

      /* Typography */
      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-family: var(--font-heading);
        line-height: 1.2;
        font-weight: 700;
      }

      /* Links */
      a {
        color: var(--color-primary);
        text-decoration: none;
        transition: color 0.2s ease;
      }

      a:hover {
        color: var(--color-secondary);
      }

      /* Images */
      img {
        max-width: 100%;
        height: auto;
        display: block;
      }

      /* Skip to content link for accessibility */
      .skip-to-content {
        position: absolute;
        top: -100%;
        left: 0;
        background: var(--color-primary);
        color: var(--color-bg);
        padding: 0.5rem 1rem;
        z-index: 9999;
      }

      .skip-to-content:focus {
        top: 0;
      }
    </style>
  </head>
  <body>
    <!-- Skip to content link for keyboard navigation -->
    <a href="#main-content" class="skip-to-content">Skip to main content</a>

    <!-- Main content slot -->
    <main id="main-content">
      <slot />
    </main>

    <!-- Footer -->
    <footer>
      <p>&copy; {new Date().getFullYear()} Bloom. All rights reserved.</p>
    </footer>
  </body>
</html>
